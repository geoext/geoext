<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Ext-dom-Layer'>/**
</span> * An extended {@link Ext.dom.Element} object that supports a shadow and shim
 *
 * @deprecated 5.1.0 Ext.dom.Element now includes support for shadow and shim
 * see {@link Ext.dom.Element#enableShadow enableShadow} and
 * {@link Ext.dom.Element#enableShim enableShim}
 */
Ext.define(&#39;Ext.dom.Layer&#39;, {
    extend: &#39;Ext.Element&#39;,
    alternateClassName: &#39;Ext.Layer&#39;,

<span id='Ext-dom-Layer-cfg-shadow'>    /**
</span>     * @cfg {String/Boolean} [shadow=false]
     * True to automatically create an {@link Ext.Shadow}, or a string indicating the
     * shadow&#39;s display {@link Ext.Shadow#mode}. False to disable the shadow.
     */

<span id='Ext-dom-Layer-cfg-shim'>    /**
</span>     * @cfg {String/Boolean} [shim=false]
     * True to automatically create a {@link Ext.dom.Shim}.
     */

<span id='Ext-dom-Layer-cfg-dh'>    /**
</span>     * @cfg {Object} [dh={tag: &#39;div&#39;, cls: &#39;x-layer&#39;}]
     * DomHelper object config to create element with.
     */

<span id='Ext-dom-Layer-cfg-constrain'>    /**
</span>     * @cfg {Boolean} [constrain=true]
     * False to disable constrain to viewport.
     */

<span id='Ext-dom-Layer-cfg-cls'>    /**
</span>     * @cfg {String} cls
     * CSS class to add to the element
     */

<span id='Ext-dom-Layer-cfg-zindex'>    /**
</span>     * @cfg {Number} [zindex=11000]
     * Starting z-index.
     */

<span id='Ext-dom-Layer-cfg-shadowOffset'>    /**
</span>     * @cfg {Number} [shadowOffset=4]
     * Number of pixels to offset the shadow
     */

<span id='Ext-dom-Layer-cfg-useDisplay'>    /**
</span>     * @cfg {Boolean} [useDisplay=false]
     * Defaults to use css offsets to hide the Layer. Specify &lt;tt&gt;true&lt;/tt&gt;
     * to use css style &lt;tt&gt;&#39;display:none;&#39;&lt;/tt&gt; to hide the Layer.
     */

<span id='Ext-dom-Layer-cfg-visibilityCls'>    /**
</span>     * @cfg {String} visibilityCls
     * The CSS class name to add in order to hide this Layer if this layer
     * is configured with &lt;code&gt;{@link #hideMode}: &#39;asclass&#39;&lt;/code&gt;
     */

<span id='Ext-dom-Layer-cfg-hideMode'>    /**
</span>     * @cfg {String} hideMode
     * A String which specifies how this Layer will be hidden.
     * Values may be:
     *
     * - `&#39;display&#39;` : The Component will be hidden using the `display: none` style.
     * - `&#39;visibility&#39;` : The Component will be hidden using the `visibility: hidden` style.
     * - `&#39;offsets&#39;` : The Component will be hidden by absolutely positioning it out of the visible area
     *   of the document. This is useful when a hidden Component must maintain measurable dimensions.
     *   Hiding using `display` results in a Component having zero dimensions.
     */

    isLayer: true,

<span id='Ext-dom-Layer-method-constructor'>    /**
</span>     * Creates new Layer.
     * @param {Object} [config] An object with config options.
     * @param {String/HTMLElement} [existingEl] Uses an existing DOM element.
     * If the element is not found it creates it.
     */
    constructor: function(config, existingEl) {
        config = config || {};
        var me = this,
            dh = Ext.DomHelper,
            cp = config.parentEl,
            pel = cp ? Ext.getDom(cp) : document.body,
            hm = config.hideMode,
            cls = Ext.baseCSSPrefix + (config.fixed ? &#39;fixed-layer&#39; : &#39;layer&#39;),
            dom, id, element, shadowConfig;

        if (existingEl) {
            dom = Ext.getDom(existingEl);
            if (!dom.parentNode) {
                pel.appendChild(dom);
            }
        }

        if (!dom) {
            dom = dh.append(pel, config.dh || {
                tag: &#39;div&#39;,
                cls: cls // primarily to give el &#39;position:absolute&#39; or, if fixed, &#39;position:fixed&#39;
            });
        }

        if (config.id) {
            dom.id = config.id;
        }
        id = dom.id;

        if (id) {
            element = Ext.cache[id];
            if (element) {
                // if we have an existing Ext.Element in the cache for this same dom
                // element, delete it, so that it can be replaced by this layer instance
                // when we callParent below.
                delete Ext.cache[id];
                element.dom = null;
            }
        }
        this.callParent([dom]);

        if (existingEl) {
            me.addCls(cls);
        }

        if (config.preventSync) {
            me.preventSync = true;
        }

        if (config.cls) {
            me.addCls(config.cls);
        }
        me.constrain = config.constrain !== false;

        // Allow Components to pass their hide mode down to the Layer if they are floating.
        // Otherwise, allow useDisplay to override the default hiding method which is visibility.
        // TODO: Have ExtJS&#39;s Element implement visibilityMode by using classes as in Mobile.
        if (hm) {
            me.setVisibilityMode(Ext.Element[hm.toUpperCase()]);
        } else if (config.useDisplay) {
            me.setVisibilityMode(Ext.Element.DISPLAY);
        } else {
            me.setVisibilityMode(Ext.Element.VISIBILITY);
        }

        if (config.shadow) {
            me.shadowOffset = config.shadowOffset || 4;
            shadowConfig = {
                offset: me.shadowOffset,
                fixed: config.fixed
            };

            if (config.shadow !== true) {
                shadowConfig.mode = config.shadow;
            }

            me.enableShadow(shadowConfig);
        } else {
            me.shadowOffset = 0;
        }

        if (config.shim) {
            me.enableShim({
                fixed: config.fixed
            });
        }

        // Keep the following only for cases where Ext.Layer would be instantiated
        // directly.  We don&#39;t ever pass hidden in the config in the framework
        // since this is handled by the Component lifecycle.
        if (config.hidden === true) {
            me.hide();
        } else if (config.hidden === false) {
            me.show();
        }
    }
});
</pre>
</body>
</html>
