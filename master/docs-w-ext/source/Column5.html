<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Ext-dashboard-Column'>/**
</span> * This class manages columns in a `Dashboard`. The primary role here is the `defaultType`
 * config which points to `Ext.dashboard.Panel` and the self-destruct mechanism to get
 * rid of empty columns.
 * @protected
 */
Ext.define(&#39;Ext.dashboard.Column&#39;, {
    extend: &#39;Ext.container.Container&#39;,
    xtype: &#39;dashboard-column&#39;,

    requires: [
        &#39;Ext.layout.container.Anchor&#39;,
        &#39;Ext.dashboard.Panel&#39;
    ],

<span id='Ext-dashboard-Column-cfg-layout'>    layout: &#39;anchor&#39;,
</span>
<span id='Ext-dashboard-Column-property-isDashboardColumn'>    isDashboardColumn : true,
</span>
<span id='Ext-dashboard-Column-cfg-defaultType'>    defaultType: &#39;dashboard-panel&#39;,
</span>
<span id='Ext-dashboard-Column-cfg-cls'>    cls: Ext.baseCSSPrefix + &#39;dashboard-column&#39;,
</span>
<span id='Ext-dashboard-Column-method-onRemove'><span id='Ext-dashboard-Column-property-synthetic'>    synthetic: true, // not user-defined
</span></span>
    onRemove: function (dashPanel, isDestroying) {
        var me = this,
            ownerCt = me.ownerCt,
            remainingSiblings,
            numRemaining,
            columnWidth,
            totalColumnWidth = 0,
            i;

        // If we&#39;ve just emptied this column.
        if (ownerCt &amp;&amp; me.items.getCount() === 0) {
            // Collect remaining column siblings of the same row, when this one has gone.
            remainingSiblings = Ext.Array.filter(ownerCt.query(&#39;&gt;&#39; + me.xtype+ &#39;[rowIndex=&#39; + me.rowIndex + &#39;]&#39;), function(c){
                return c !== me;
            });
            numRemaining = remainingSiblings.length;

            // If this column is not destroyed, then remove this column (unless it is the last one!)
            if (!me.destroying &amp;&amp; !me.destroyed) {
                ownerCt.remove(me);

                // Down to just one column; it must take up full width
                if (numRemaining === 1) {
                    remainingSiblings[0].columnWidth = 1;
                }
                // If more than one remaining sibling, redistribute columnWidths proportionally so that they
                // still total 1.0
                else {
                    for (i = 0; i &lt; numRemaining; i++) {
                        totalColumnWidth += remainingSiblings[i].columnWidth || 0;
                    }
                    for (i = 0; i &lt; numRemaining; i++) {
                        columnWidth = remainingSiblings[i].columnWidth;
                        remainingSiblings[i].columnWidth = Math.floor(columnWidth / totalColumnWidth * 100) / 100;
                    }
                }

                // Needed if user is *closing* the last portlet in a column as opposed to just dragging it to another place
                // The destruction will not force a layout
                if (isDestroying) {
                    ownerCt.updateLayout();
                }
            }
        }
    }
});
</pre>
</body>
</html>
